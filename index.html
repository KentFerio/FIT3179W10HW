<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Population & Immigration Trends</title>
  <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
  <style>
    body { font-family: Arial, Helvetica, sans-serif; background:#f7f7f7; margin:0; padding:24px; }
    h1 { text-align:center; margin:0 0 16px; }
    #controls { display:flex; justify-content:center; gap:8px; margin:8px 0 24px; }
    .row { display:flex; gap:24px; justify-content:center; align-items:flex-start; flex-wrap:wrap; }
    .chart { background:#fff; padding:12px; border-radius:10px; box-shadow:0 2px 8px rgba(0,0,0,.08); }
  </style>
</head>
<body>
  <h1>Population & Immigration Trends</h1>

  <div id="controls">
    <label for="stateSelect"><strong>Select State:</strong></label>
    <select id="stateSelect">
      <option>All</option>
      <option>New South Wales</option>
      <option>Victoria</option>
      <option>Queensland</option>
      <option>South Australia</option>
      <option>Western Australia</option>
      <option>Tasmania</option>
      <option>Northern Territory</option>
      <option>Australian Capital Territory</option>
    </select>
  </div>

  <div class="row">
    <div id="popChart" class="chart"></div>
    <div id="immChart" class="chart"></div>
  </div>

  <script>
    // Embed both charts
    let popView = null;
    let immView = null;

    vegaEmbed('#popChart', 'population.json', {actions:false}).then(res => {
      popView = res.view;
      popView.signal('selected_state', 'All').run();
    }).catch(console.error);

    vegaEmbed('#immChart', 'immigrant.json', {actions:false}).then(res => {
      immView = res.view;
      immView.signal('selected_state', 'All').run();
    }).catch(console.error);

    // Wire the single dropdown to both charts
    document.getElementById('stateSelect').addEventListener('change', (e) => {
      const val = e.target.value;
      if (popView) popView.signal('selected_state', val).run();
      if (immView) immView.signal('selected_state', val).run();
    });
  </script>
</body>
</html>
